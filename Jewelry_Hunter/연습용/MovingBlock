using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class MovingBlock : MonoBehaviour
{
  public float moveX = 0.0f;
  public float moveY = 0.0f;
  public float times = 0.0f;
  public float weight = 0.0f; //정지시간
  public bool isMoveWhenOn = false; //올라갔을 때 움직이기
  
  public bool isCanMove = true;
  float perDx;
  float perDy;
  Vector3 defPos;
  bool isReverse = false;
  
  void Start()
  {
    defPos = transform.position;
    float timestep = Time.fixedDeltaTime;
    perDX = moveX / (1.0f / timestep * times);
    perDY = moveY / (1.0f / timestep * times);
    
    if(isMoveWhenOn)
    {
      isCanMove = false;
    }
  }
  
  void Update()
  {
  }
  
  private void FixedUpdate()
  {
    if(isCanMove)
    {
      float x = transform.position.x;
      float y = transform.position.y;
      bool endX = false;
      bool endY = false;
      if(isReverse)
      {
        if((perDx >= 0.0f && <= defPos.x) || (perDX < 0.0f && x >= defPos.x))
        {
          endX = true;
        }
        if((perDY >= 0.0f && <= defPos.y) || (perDY < 0.0f && x >= defPos.y))
        {
          endY = true;
        }
        transform.Translate(new Vector3(-perDX, -perDY, defPos.z));      
      }
      else
      {
        if((perDx >= 0.0f && >= defPos.x) || (perDX < 0.0f && x <= defPos.x))
        {
          endX = true;
        }
        if((perDY >= 0.0f && >= defPos.y) || (perDY < 0.0f && x <= defPos.y))
        {
          endY = true;
        }
        Vector3 v = new Vector3(perDX, perDY, defPos.z);
        transform.Translate(v);
      }
      
    }
    
  }
}
